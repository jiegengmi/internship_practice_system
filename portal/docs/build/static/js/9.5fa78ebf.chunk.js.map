{"version":3,"sources":["pages/login/index.jsx","webpack://react-admin/./src/pages/login/style.less?354f","pages/login/style.less","../node_modules/css-loader/dist/runtime/getUrl.js","pages/login/login-bg.jpg","../node_modules/@ant-design/icons-svg/es/asn/UserOutlined.js","../node_modules/@ant-design/icons/es/icons/UserOutlined.js"],"names":["formValues","account","password","config","path","auth","layout","props","useState","message","setMessage","isMount","setIsMount","useForm","form","login","ajax","usePost","handleSubmit","useCallback","values","loading","params","alert","run","a","id","name","token","errorTip","then","res","others","setLoginUser","toHome","catch","err","console","error","response","data","useEffect","IS_DEV","IS_TEST","IS_PREVIEW","setFieldsValue","setTimeout","formItemClass","s","formItem","active","root","title","logo","proxy","box","onFinish","header","allowClear","autoFocus","prefix","placeholder","rules","required","type","noStyle","shouldUpdate","style","marginBottom","htmlType","disabled","isFieldsTouched","getFieldsError","filter","errors","length","submitBtn","api","content","__esModule","default","module","i","options","exports","locals","___CSS_LOADER_EXPORT___","___CSS_LOADER_URL_REPLACEMENT_0___","push","url","test","slice","hash","needQuotes","concat","replace","UserOutlined","ref","React","AntdIcon","Object","assign","icon","UserOutlinedSvg","displayName"],"mappings":"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","file":"static/js/9.5fa78ebf.chunk.js","sourcesContent":["import React, {useState, useEffect, useCallback} from 'react';\nimport {Helmet} from 'react-helmet';\nimport {Button, Form} from 'antd';\nimport {LockOutlined, UserOutlined} from '@ant-design/icons';\nimport {FormItem, setLoginUser} from '@ra-lib/admin';\nimport config from 'src/commons/config-hoc';\nimport {toHome} from 'src/commons';\nimport {Logo, Proxy} from 'src/components';\nimport {IS_DEV, IS_TEST, IS_PREVIEW} from 'src/config';\nimport s from './style.less';\n\n// 开发模式 默认填充的用户名密码\nconst formValues = {\n    account: 'admin',\n    password: '123456',\n};\n\nexport default config({\n    path: '/login',\n    auth: false,\n    layout: false,\n})(function Login(props) {\n    const [message, setMessage] = useState();\n    const [isMount, setIsMount] = useState(false);\n    const [form] = Form.useForm();\n\n    const login = props.ajax.usePost('/login');\n\n    const handleSubmit = useCallback(\n        (values) => {\n            if (login.loading) return;\n\n            const params = {\n                ...values,\n            };\n\n            alert('TODO 登录');\n            login.run = async () => ({id: 1, name: '测试', token: 'test'});\n\n            login\n                .run(params, {errorTip: false})\n                .then((res) => {\n                    const {id, name, token, ...others} = res;\n                    setLoginUser({\n                        id, // 必须字段\n                        name, // 必须字段\n                        token,\n                        ...others,\n                        // 其他字段按需添加\n                    });\n                    toHome();\n                })\n                .catch((err) => {\n                    console.error(err);\n                    setMessage(err.response?.data?.message || '用户名或密码错误');\n                });\n        },\n        [login],\n    );\n\n    useEffect(() => {\n        // 开发时默认填入数据\n        if (IS_DEV || IS_TEST || IS_PREVIEW) {\n            form.setFieldsValue(formValues);\n        }\n\n        setTimeout(() => setIsMount(true), 300);\n    }, [form]);\n\n    const formItemClass = [s.formItem, {[s.active]: isMount}];\n\n    return (\n        <div className={s.root}>\n            <Helmet title=\"欢迎登录\" />\n            <div className={s.logo}>\n                <Logo />\n            </div>\n            <Proxy className={s.proxy} />\n            <div className={s.box}>\n                <Form form={form} name=\"login\" onFinish={handleSubmit}>\n                    <div className={formItemClass}>\n                        <h1 className={s.header}>欢迎登录</h1>\n                    </div>\n                    <div className={formItemClass}>\n                        <FormItem\n                            name=\"account\"\n                            allowClear\n                            autoFocus\n                            prefix={<UserOutlined />}\n                            placeholder=\"请输入用户名\"\n                            rules={[{required: true, message: '请输入用户名！'}]}\n                        />\n                    </div>\n                    <div className={formItemClass}>\n                        <FormItem\n                            type=\"password\"\n                            name=\"password\"\n                            prefix={<LockOutlined />}\n                            placeholder=\"请输入密码\"\n                            rules={[{required: true, message: '请输入密码！'}]}\n                        />\n                    </div>\n                    <div className={formItemClass}>\n                        <FormItem noStyle shouldUpdate style={{marginBottom: 0}}>\n                            {() => (\n                                <Button\n                                    className={s.submitBtn}\n                                    loading={login.loading}\n                                    type=\"primary\"\n                                    htmlType=\"submit\"\n                                    disabled={\n                                        // 用户没有操作过，或者没有setFieldsValue\n                                        !form.isFieldsTouched(true) ||\n                                        // 表单中存在错误\n                                        form.getFieldsError().filter(({errors}) => errors.length).length\n                                    }\n                                >\n                                    登录\n                                </Button>\n                            )}\n                        </FormItem>\n                    </div>\n                </Form>\n                <div className={s.errorTip}>{message}</div>\n            </div>\n        </div>\n    );\n});\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-10-1!../../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-10-2!./style.less\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/getUrl.js\";\nimport ___CSS_LOADER_URL_IMPORT_0___ from \"./login-bg.jpg\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".root_27x2_ {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  margin: 0;\\n  height: 100vh;\\n  background-image: url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \");\\n  background-size: cover;\\n  background-position: center;\\n  background-repeat: no-repeat;\\n}\\n.logo_215K2 {\\n  position: absolute;\\n  top: 16px;\\n  left: 16px;\\n}\\n.proxy_1quYf {\\n  position: absolute;\\n  cursor: pointer;\\n  top: 16px;\\n  right: 16px;\\n  display: flex;\\n  align-items: center;\\n  background: #fff;\\n  padding: 8px 16px;\\n  border-radius: 3px;\\n}\\n.box_3GeED {\\n  padding: 16px 40px;\\n  width: 350px;\\n  border-radius: 0;\\n  z-index: 100;\\n}\\n.box_3GeED .header_1IDbf {\\n  font-size: 25px;\\n  text-align: center;\\n  color: #fff;\\n  font-weight: bolder;\\n}\\n.box_3GeED .submitBtn_2uMDZ {\\n  width: 100%;\\n}\\n.box_3GeED .errorTip_3n82Q {\\n  height: 30px;\\n  line-height: 30px;\\n  text-align: center;\\n  color: red;\\n}\\n.box_3GeED .formItem_tHdOe {\\n  transition-delay: 5s;\\n  transition: 500ms;\\n  transform: translateX(100%);\\n  margin-bottom: 24px;\\n}\\n.box_3GeED .formItem_tHdOe:nth-child(2n) {\\n  transform: translateX(-100%);\\n}\\n.box_3GeED .formItem_tHdOe.active_h8omp {\\n  transform: translateX(0);\\n}\\n.box_3GeED .react-admin-input {\\n  height: 34px;\\n}\\n.box_3GeED .react-admin-btn {\\n  height: 44px;\\n}\\n.box_3GeED .react-admin-form-item-explain {\\n  position: absolute !important;\\n  bottom: -24px !important;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://src/pages/login/style.less\"],\"names\":[],\"mappings\":\"AAEA;EACI,aAAA;EACA,uBAAA;EACA,mBAAA;EACA,SAAA;EACA,aAAA;EACA,yDAAA;EACA,sBAAA;EACA,2BAAA;EACA,4BAAA;AAIJ;AADA;EACI,kBAAA;EACA,SAAA;EACA,UAAA;AAGJ;AAAA;EACI,kBAAA;EACA,eAAA;EACA,SAAA;EACA,WAAA;EACA,aAAA;EACA,mBAAA;EACA,gBAAA;EACA,iBAAA;EACA,kBAAA;AAEJ;AACA;EACI,kBAAA;EACA,YAAA;EAEA,gBAAA;EAEA,YAAA;AADJ;AALA;EASQ,eAAA;EACA,kBAAA;EACA,WAAA;EACA,mBAAA;AADR;AAXA;EAgBQ,WAAA;AAFR;AAdA;EAoBQ,YAAA;EACA,iBAAA;EACA,kBAAA;EACA,UAAA;AAHR;AApBA;EA2BQ,oBAAA;EACA,iBAAA;EACA,2BAAA;EACA,mBAAA;AAJR;AAMQ;EACI,4BAAA;AAJZ;AAOQ;EACI,wBAAA;AALZ;AAhCA;EA2CY,YAAA;AARZ;AAnCA;EA+CY,YAAA;AATZ;AAtCA;EAmDY,6BAAA;EACA,wBAAA;AAVZ\",\"sourcesContent\":[\"@import \\\"src/theme\\\";\\n\\n.root {\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    margin: 0;\\n    height: 100vh;\\n    background-image: url(\\\"./login-bg.jpg\\\");\\n    background-size: cover;\\n    background-position: center;\\n    background-repeat: no-repeat;\\n}\\n\\n.logo {\\n    position: absolute;\\n    top: 16px;\\n    left: 16px;\\n}\\n\\n.proxy {\\n    position: absolute;\\n    cursor: pointer;\\n    top: 16px;\\n    right: 16px;\\n    display: flex;\\n    align-items: center;\\n    background: #fff;\\n    padding: 8px 16px;\\n    border-radius: 3px;\\n}\\n\\n.box {\\n    padding: 16px 40px;\\n    width: 350px;\\n\\n    border-radius: 0;\\n    // background: #f8f8f9;\\n    z-index: 100;\\n\\n    .header {\\n        font-size: 25px;\\n        text-align: center;\\n        color: #fff;\\n        font-weight: bolder;\\n    }\\n\\n    .submitBtn {\\n        width: 100%;\\n    }\\n\\n    .errorTip {\\n        height: 30px;\\n        line-height: 30px;\\n        text-align: center;\\n        color: red;\\n    }\\n\\n    .formItem {\\n        transition-delay: 5s;\\n        transition: 500ms;\\n        transform: translateX(100%);\\n        margin-bottom: 24px;\\n\\n        &:nth-child(2n) {\\n            transform: translateX(-100%);\\n        }\\n\\n        &.active {\\n            transform: translateX(0);\\n        }\\n    }\\n\\n    :global {\\n        .@{ant-prefix}-input {\\n            height: 34px;\\n        }\\n\\n        .@{ant-prefix}-btn {\\n            height: 44px;\\n        }\\n\\n        .@{ant-prefix}-form-item-explain {\\n            position: absolute !important;\\n            bottom: -24px !important;\\n        }\\n    }\\n}\\n\\n@packageName: react-admin;\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"antPrefix\": \"react-admin\",\n\t\"raLibPrefix\": \"react-admin-ra\",\n\t\"primaryColor\": \"#1890ff\",\n\t\"root\": \"root_27x2_\",\n\t\"logo\": \"logo_215K2\",\n\t\"proxy\": \"proxy_1quYf\",\n\t\"box\": \"box_3GeED\",\n\t\"header\": \"header_1IDbf\",\n\t\"submitBtn\": \"submitBtn_2uMDZ\",\n\t\"errorTip\": \"errorTip_3n82Q\",\n\t\"formItem\": \"formItem_tHdOe\",\n\t\"active\": \"active_h8omp\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\nmodule.exports = function (url, options) {\n  if (!options) {\n    // eslint-disable-next-line no-param-reassign\n    options = {};\n  } // eslint-disable-next-line no-underscore-dangle, no-param-reassign\n\n\n  url = url && url.__esModule ? url.default : url;\n\n  if (typeof url !== 'string') {\n    return url;\n  } // If url is already wrapped in quotes, remove them\n\n\n  if (/^['\"].*['\"]$/.test(url)) {\n    // eslint-disable-next-line no-param-reassign\n    url = url.slice(1, -1);\n  }\n\n  if (options.hash) {\n    // eslint-disable-next-line no-param-reassign\n    url += options.hash;\n  } // Should url be wrapped?\n  // See https://drafts.csswg.org/css-values-3/#urls\n\n\n  if (/[\"'() \\t\\n]/.test(url) || options.needQuotes) {\n    return \"\\\"\".concat(url.replace(/\"/g, '\\\\\"').replace(/\\n/g, '\\\\n'), \"\\\"\");\n  }\n\n  return url;\n};","export default __webpack_public_path__ + \"static/media/login-bg.3ab1656e.jpg\";","// This icon file is generated automatically.\nvar UserOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z\" } }] }, \"name\": \"user\", \"theme\": \"outlined\" };\nexport default UserOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport UserOutlinedSvg from \"@ant-design/icons-svg/es/asn/UserOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar UserOutlined = function UserOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: UserOutlinedSvg\n  }));\n};\n\nUserOutlined.displayName = 'UserOutlined';\nexport default /*#__PURE__*/React.forwardRef(UserOutlined);"],"sourceRoot":""}